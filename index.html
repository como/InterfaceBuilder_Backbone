<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Canvas</title>
<link href="vendor/smoothness/jquery-ui-1.10.0.custom.min.css" rel="stylesheet">
<link href="css/canvas.css" rel="stylesheet">
<link href="vendor/bootstrap.css" rel="stylesheet">
<link href="vendor/bootstrap-responsive.css" rel="stylesheet">
	
<!-- Site CSS -->
<link href="css/site/theme.css" rel="stylesheet">
<link href="css/site/flexslider.css" rel="stylesheet">
</head>

<body>
	
	<!-- Start scaffolding Templates -->
	
	<script id="container-template" type="text/template">
	<div class="row">
		<div class="span12 handle "><a href="#" class="ib-control pull-right" onclick="PageController.removeContainer({uuid: '<%= uuid %>'})"><span class="label label-inverse">container</span> <i class="icon-remove"></i></a></div>
	</div>
	<div class="rows">
	</div>
	</script>
	
	<script id="row-template" type="text/template">
	<div class="span12 handle">
		<a href="#" class="ib-control pull-right" onclick="PageController.removeRow({uuid:'<%= uuid %>', containerUUID: '<%= options.containerUUID %>'})"><span class="label label-inverse">row</span> <i class="icon-remove"></i></a>
	</div>
	<div class="columns">
	</div>
	</script>
	
	<script id="column-template" type="text/template">
	<div class="handle"></div>
	Column <%= content %>
	<div class="blocks">
	</div>

	</script>
	
	<!-- End scaffolding Templates -->
	
	<!-- Start block Templates -->
	
	<script id="text-block-template" type="text/template">
	<a href="#"  class="ib-control pull-right" onclick="PageController.removeBlock({uuid:'<%= uuid %>', columnUUID:'<%= columnUUID %>', rowUUID:'<%= rowUUID %>', containerUUID: '<%= containerUUID %>'})"><i class="icon-remove"></i></a>
	Rich Text <%= content %> 

	</script>
	
	<script id="table-block-template" type="text/template">
	<a href="#"  class="ib-control pull-right" onclick="PageController.removeBlock({uuid:'<%= uuid %>', columnUUID:'<%= columnUUID %>', rowUUID:'<%= rowUUID %>', containerUUID: '<%= containerUUID %>'})"><i class="icon-remove"></i></a>
	Table <%= content %>
	</script>
	
	<script id="video-block-template" type="text/template">
	<a href="#"  class="ib-control pull-right" onclick="PageController.removeBlock({uuid:'<%= uuid %>', columnUUID:'<%= columnUUID %>', rowUUID:'<%= rowUUID %>', containerUUID: '<%= containerUUID %>'})"><i class="icon-remove"></i></a>
	Video <%= content %> 
	</script>
	
	<!-- End block Templates -->
	
	<!-- Begin Sidebar -->
	<div id="sidebarbtn">
		<i class="icon-th-list icon-white"></i>
	</div>
	
	<div id="sidebar">
		<div class="pull-right">
		<a class="btn btn-mini btn-inverse" onclick="toggleSidebar()"><i class="icon-remove icon-white"></i></a>
		</div>
		<br/>
		
		<ul class="nav nav-list">
			<li class="nav-header">Templates</li>
			<li><a href="/#/page/1"><div class="draggable_scaffold" data-template="scaffold_col1row">Home Template</div></a></li>
			<li><a href="#"><div class="draggable_scaffold" data-template="scaffold_col1row">About Template</div></a></li>
			
			<li class="nav-header">Scaffolding</li>
			<li><a href="#"><div class="sidebar_container" data-template="container-template">Container</div></a></li>
			<li><a href="#"><div class="sidebar_row" data-template="row-template">Row</div></a>

		  <li class="nav-header">Blocks</li>
		  <li><a href="#"><div class="sidebar_blocks" data-template="video-block-template">Video</div></a></li>			
		</ul>
	</div>
	<!-- End Sidebar -->
	
	<div id="page">
	</div>	
	<script src="vendor/uuid.core.js"></script>
	<script src="vendor/jquery-1.9.0.js"></script>
	<script src="vendor/jquery-ui-1.10.0.custom.min.js"></script>
	<script src="vendor/underscore-min.js"></script>
	<script src="vendor/backbone-min.js"></script>
	<script src="vendor/bootstrap.min.js"></script>
	<script src="js/app/models.js"></script>
	<script src="js/app/views.js"></script>
	<script src="js/app/controllers.js"></script>
	<script src="js/app/ui.js"></script>
	<script>
	$(document).ready(function(){
	currentPage = new Page({id:1});
	currentPage.fetch({
		    success: function () {
					PageController = new IB.PageController(currentPage);
		    },
				error: function () {
					PageController = new IB.PageController(new Page());
				}
		});
		
		$( ".sidebar_container" ).draggable({
			scope: "containers",
		    connectToSortable: ".page",
		    helper: "clone",
		    revert: "invalid"
		});

	
		$( ".sidebar_rows" ).draggable({
			scope: "rows",
		    connectToSortable: ".container",
		    helper: "clone",
		    revert: "invalid"
		});
		
		$( ".sidebar_blocks" ).draggable({
			scope: "columns",
		    connectToSortable: ".column",
		    helper: "clone",
		    revert: "invalid"
		});
	
		$("#sidebarbtn").click(function(){
			toggleSidebar();
		});
		
		$('.handle').hide();
	});
	</script>
</body>
</html>